<Window x:Class="Escola.WPF.MarksWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Escola.WPF"
        mc:Ignorable="d"
        Title="MarksWindow" Height="450" Width="800">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Title -->
            <RowDefinition Height="Auto"/>
            <!-- Form -->
            <RowDefinition Height="Auto"/>
            <!-- Buttom -->
            <RowDefinition Height="*"/>
            <!-- DataGrid -->
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Text="Marks Page" FontSize="20" FontWeight="Bold" Margin="0,0,0,15" />

        <!-- Form organized -->
        <Grid Grid.Row="1" Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Column -->
            <StackPanel Grid.Column="0" Margin="5">
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <Label Content="Student:" Width="120"/>
                    <ComboBox x:Name="cbStudents" Width="200"
                          DisplayMemberPath="FullName"
                          SelectedValuePath="Id"
                          SelectedValue="{Binding StudentId}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <Label Content="Subject:" Width="120"/>
                    <ComboBox x:Name="cbSubjects" Width="200"
                          DisplayMemberPath="Name"
                          SelectedValuePath="Id"
                          SelectedValue="{Binding SubjectId}" />
                </StackPanel>
            </StackPanel>

            <!-- Column -->
            <StackPanel Grid.Column="1" Margin="5">
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <Label Content="Assessment Type:" Width="120"/>
                    <ComboBox x:Name="cbAssessmentType" Width="200"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <Label Content="Score:" Width="120"/>
                    <TextBox Name="txtScore" Width="200" Margin="0,5,0,0"/>
                </StackPanel>
            </StackPanel>

            <!-- Column -->
            <StackPanel Grid.Column="2" Margin="5">
                <StackPanel Orientation="Horizontal" Margin="0,5">
                    <Label Content="Assessment Year:" Width="120"/>
                    <TextBox x:Name="txtAssessmentYear" Width="200"/>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- Buttons-->
        <StackPanel Orientation="Horizontal" Grid.Row="2" HorizontalAlignment="Left" Margin="0,0,0,15">
            <Button Name="btnCreate" Content="Create" Width="100" Margin="5" Click="btnCreate_Click"/>
            <Button Name="btnEdit" Content="Update" Width="100" Margin="5" Click="btnEdit_Click"/>
            <Button Name="btnDelete" Content="Delete" Width="100" Margin="5" Click="btnDelete_Click"/>
            <Button Name="btnReloadFinalAverages" Content="Reload average finals " Width="180" Margin="5" Click="btnReloadFinalAverages_Click"/>
            <Button Content="⬅ Come back to menu"
                Click="BackToMenu_Click"
                Margin="10"
                Padding="10,5"
                FontWeight="Bold"
                Background="#FF007ACC"
                Foreground="White"
                Cursor="Hand"
                BorderThickness="0"
                Width="140"
                Height="40"/>
        </StackPanel>

        <!-- To have two datagrid views side to side -->
        <Grid Grid.Row="3" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- marks table-->
            <DataGrid Name="dgMarks"
                    Grid.Column="0"
                    AutoGenerateColumns="False"
                    SelectionMode="Single"
                    IsReadOnly="True"
                    Margin="0,0,10,0"
                    SelectionChanged="dgMarks_SelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="Auto"/>
                    <DataGridTextColumn Header="Student" Binding="{Binding StudentName}" Width="*"/>
                    <DataGridTextColumn Header="Subject" Binding="{Binding SubjectName}" Width="*"/>
                    <DataGridTextColumn Header="Assessment Type" Binding="{Binding AssessmentType}" Width="*"/>
                    <DataGridTextColumn Header="Assessment Year" Binding="{Binding AssessmentDate}" Width="*"/>
                    <DataGridTextColumn Header="Score" Binding="{Binding Grade}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Final averages table -->
            <DataGrid x:Name="dgFinalAverages"
                    Grid.Column="1"
                    AutoGenerateColumns="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Student" Binding="{Binding StudentId}" />
                    <DataGridTextColumn Header="Subject" Binding="{Binding SubjectId}" />
                    <DataGridTextColumn Header="Average" Binding="{Binding Average, StringFormat=F2}" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

     
    </Grid>
</Window>
